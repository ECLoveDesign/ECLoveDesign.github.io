function initHeader(){var n=$("#drop_PolId").html();n!="請選擇"?$("#f1").html(n):$("#f1").html("")}function initHideBtn(){var n=$("#isHide").val();n==1?($(".hideArea").hide(),$("#hideLi").hide(),$("#showLi").show(),$("#isHide").val(0)):($(".hideArea").show(),$("#hideLi").show(),$("#showLi").hide(),$("#isHide").val(1))}function showMblPrint(n){url="/OceanExports/PrintExport/MblPrint?Id="+n;window.open(url,"printpage")}function initReasonStatus(){var n=!$("#OceanExportMbl_IsCanceled").is(":checked");$("#OceanExportMbl_CanceledDate").attr("readonly",n);$("#drop_CancelReason").attr("disabled",n);n?($("#OceanExportMbl_CancelByName").val(""),$("#CancelById").val("")):($("#OceanExportMbl_CancelByName").val(abp.currentUser.userName),$("#CancelById").val(abp.currentUser.id))}$(function(){var n=abp.localization.getResource("Freight");$("#OceanExportMbl_PorEtd").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportMbl_PolEtd").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportMbl_PodEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportMbl_DelEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportMbl_FdestEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportHbl_PorEtd").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportHbl_PolEtd").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportHbl_PodEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportHbl_DelEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportHbl_FdestEta").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});$("#OceanExportMbl_CanceledDate").datepicker({format:"yyyy-mm-dd",startDate:"-15d",endDate:"+60d"});tempusDominus.extend(window.tempusDominus.plugins.customDateFormat);$(".cdatetime").tempusDominus({restrictions:{minDate:"2023-02-10 00:00",maxDate:"2023-04-10 00:00"},localization:{format:"yyyy-MM-dd HH:mm"}});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"BlTypeId"}).done(function(n){n!=null&&n.length>0&&initSysCodeTag(n,"BlTypeId",$("#mBlTypeId").val())});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"OblTypeId"}).done(function(n){n!=null&&n.length>0&&initSysCodeTag(n,"OblTypeId",$("#mOblTypeId").val())});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"FreightTermId"}).done(function(n){n!=null&&n.length>0&&(initSysCodeTag(n,"FreightTermId",$("#mFreightTermId").val()),initSysCodeTag(n,"FreightTermForBuyerId",$("#hFreightTermForBuyerId").val()),initSysCodeTag(n,"FreightTermForSalerId",$("#hFreightTermForSalerId").val()))});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"ShipModeId"}).done(function(n){n!=null&&n.length>0&&(initSysCodeTag(n,"ShipModeId",$("#mShipModeId").val()),initSysCodeTag(n,"HShipModeId",$("#hHShipModeId").val()))});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"SvcTermFromId"}).done(function(n){n!=null&&n.length>0&&(initSysCodeTag(n,"SvcTermFromId",$("#mSvcTermFromId").val()),initSysCodeTag(n,"SvcTermToId",$("#mSvcTermToId").val()),initSysCodeTag(n,"HSvcTermFromId",$("#hHSvcTermFromId").val()),initSysCodeTag(n,"HSvcTermToId",$("#hHSvcTermToId").val()))});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"PreCarriageVesselNameId"}).done(function(n){n!=null&&n.length>0&&initSysCodeTag(n,"PreCarriageVesselNameId",$("#mPreCarriageVesselNameId").val())});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"CargoTypeId"}).done(function(n){n!=null&&n.length>0&&initSysCodeTag(n,"CargoTypeId",$("#hCargoTypeId").val())});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"MblSalesTypeId"}).done(function(n){n!=null&&n.length>0&&initSysCodeTag(n,"MblSalesTypeId",$("#mMblSalesTypeId").val())});dolphin.freight.common.ajaxDropdown.getSysCodeDtosByType({queryType:"CancelReason"}).done(function(n){n!=null&&n.length>0&&initCancelReasonTag(n,"CancelReason",$("#mCancelReason").val())});dolphin.freight.settings.substations.substation.getSubstations({}).done(function(n){n!=null&&n.length>0&&initSubstationsTag(n,"OfficeId",$("#mOfficeId").val())});dolphin.freight.tradePartners.tradePartner.getList({}).done(function(n){var t=n.items;initTradePartnerSelect(t,"MblCarrierId",$("#mMblCarrierId").val());initTradePartnerSelect(t,"BlAcctCarrierId",$("#mBlAcctCarrierId").val());initTradePartnerSelect(t,"ShippingAgentId",$("#mShippingAgentId").val());initTradePartnerSelect(t,"MblOverseaAgentId",$("#mMblOverseaAgentId").val());initTradePartnerSelect(t,"MblNotifyId",$("#mMblNotifyId").val());initTradePartnerSelect(t,"MblReferralById",$("#mMblReferralById").val());initTradePartnerSelect(t,"EmptyPickupId",$("#mEmptyPickupId").val());initTradePartnerSelect(t,"DeliveryToId",$("#mDeliveryToId").val());initTradePartnerSelect(t,"CoLoaderId",$("#mCoLoaderId").val());initTradePartnerSelect(t,"ForwardingAgentId",$("#mForwardingAgentId").val());initTradePartnerSelect(t,"CareOfId",$("#mCareOfId").val());initTradePartnerSelect(t,"HblCustomerId",$("#hHblCustomerId").val());initTradePartnerSelect(t,"HblShipperId",$("#hHblShipperId").val());initTradePartnerSelect(t,"HblBillToId",$("#hHblBillToId").val());initTradePartnerSelect(t,"HblConsigneeId",$("#hHblConsigneeId").val());initTradePartnerSelect(t,"HblNotifyId",$("#hHblNotifyId").val());initTradePartnerSelect(t,"CustomsBrokerId",$("#hCustomsBrokerId").val());initTradePartnerSelect(t,"TruckerId",$("#hTruckerId").val());initTradePartnerSelect(t,"AgentId",$("#hAgentId").val());initTradePartnerSelect(t,"HblForwardingAgentId",$("#hHblForwardingAgentId").val());initTradePartnerSelect(t,"ReceivingAgentId",$("#hReceivingAgentId").val());initTradePartnerSelect(t,"FbaFcId",$("#hFbaFcId").val());initTradePartnerSelect(t,"HEmptyPickupId",$("#hHEmptyPickupId").val());initTradePartnerSelect(t,"HDeliveryToId",$("#hHDeliveryToId").val());initTradePartnerSelect(t,"HMblReferralById",$("#hHMblReferralById").val())});dolphin.freight.settings.ports.port.getList({}).done(function(n){console.log(n.items);n!=null&&n.items!=null&&n.items.length>0&&(initPortsTag(n.items,"PorId",$("#mPorId").val()),initPortsTag(n.items,"PolId",$("#mPolId").val()),initPortsTag(n.items,"PodId",$("#mPodId").val()),initPortsTag(n.items,"DelId",$("#mDelId").val()),initPortsTag(n.items,"FdestId",$("#mFdestId").val()),initPortsTag(n.items,"HPorId",$("#hHPorId").val()),initPortsTag(n.items,"HPodId",$("#hHPodId").val()),initPortsTag(n.items,"HDelId",$("#hHDelId").val()),initPortsTag(n.items,"HFdestId",$("#hHFdestId").val()),initPortsTag(n.items,"TransPort1Id",$("#mTransPort1Id").val()));initHeader()});$("#saveBtn").click(function(){console.log($("#OfficeId").val());$("#mOfficeId").val($("#OfficeId").val());$("#mMblSalesTypeId").val($("#MblSalesTypeId").val());$("#mPreCarriageVesselNameId").val($("#PreCarriageVesselNameId").val());$("#mSvcTermFromId").val($("#SvcTermFromId").val());$("#mSvcTermToId").val($("#SvcTermToId").val());$("#mShipModeId").val($("#ShipModeId").val());$("#mFreightTermId").val($("#FreightTermId").val());$("#mBlTypeId").val($("#BlTypeId").val());$("#mMblCarrierId").val($("#MblCarrierId").val());$("#mBlAcctCarrierId").val($("#BlAcctCarrierId").val());$("#mShippingAgentId").val($("#ShippingAgentId").val());$("#mMblOverseaAgentId").val($("#MblOverseaAgentId").val());$("#mMblNotifyId").val($("#MblNotifyId").val());$("#mMblReferralById").val($("#MblReferralById").val());$("#mEmptyPickupId").val($("#EmptyPickupId").val());$("#mDeliveryToId").val($("#DeliveryToId").val());$("#mCoLoaderId").val($("#CoLoaderId").val());$("#mForwardingAgentId").val($("#ForwardingAgentId").val());$("#mCareOfId").val($("#CareOfId").val());$("#mPorId").val($("#PorId").val());$("#mPolId").val($("#PolId").val());$("#mPodId").val($("#PodId").val());$("#mDelId").val($("#DelId").val());$("#mFdestId").val($("#FdestId").val());$("#mTransPort1Id").val($("#TransPort1Id").val());$("#mOblTypeId").val($("#OblTypeId").val());$("#hCargoTypeId").val($("#CargoTypeId").val());$("#hHSvcTermFromId").val($("#HSvcTermFromId").val());$("#hHSvcTermToId").val($("#HSvcTermToId").val());$("#hHShipModeId").val($("#HShipModeId").val());$("#hFreightTermForBuyerId").val($("#FreightTermForBuyerId").val());$("#hFreightTermForSalerId").val($("#FreightTermForSalerId").val());$("#hHblCustomerId").val($("#HblCustomerId").val());$("#hHblShipperId").val($("#HblShipperId").val());$("#hHblBillToId").val($("#HblBillToId").val());$("#hHblConsigneeId").val($("#HblConsigneeId").val());$("#hHblNotifyId").val($("#HblNotifyId").val());$("#hCustomsBrokerId").val($("#CustomsBrokerId").val());$("#hTruckerId").val($("#TruckerId").val());$("#hAgentId").val($("#AgentId").val());$("#hHblForwardingAgentId").val($("#HblForwardingAgentId").val());$("#hReceivingAgentId").val($("#ReceivingAgentId").val());$("#hFbaFcId").val($("#FbaFcId").val());$("#hHEmptyPickupId").val($("#HEmptyPickupId").val());$("#hHDeliveryToId").val($("#HDeliveryToId").val());$("#hHMblReferralById").val($("#HMblReferralById").val());$("#hHPorId").val($("#HPorId").val());$("#hHPodId").val($("#HPodId").val());$("#hHDelId").val($("#HDelId").val());$("#hHFdestId").val($("#HFdestId").val());$("#mMblCarrierContent").val($("#MblCarrierContent").val());$("#mBlAcctCarrierContent").val($("#BlAcctCarrierContent").val());$("#mShippingAgentContent").val($("#ShippingAgentContent").val());$("#mMblOverseaAgentContent").val($("#MblOverseaAgentContent").val());$("#mMblNotifyContent").val($("#MblNotifyContent").val());$("#mForwardingAgentContent").val($("#ForwardingAgentContent").val());$("#mCoLoaderContent").val($("#CoLoaderContent").val());$("#mCareOfContent").val($("#CareOfContent").val());$("#mEmptyPickupContent").val($("#EmptyPickupContent").val());$("#mDeliveryToContent").val($("#DeliveryToContent").val());$("#mMblReferralByContent").val($("#MblReferralByContent").val());$("#mCancelById").val($("#CancelById").val());$("#mCancelReason").val($("#CancelReason").val());$("#createForm").submit()});$("#saveEditBtn").click(function(){console.log($("#OfficeId").val());$("#mOfficeId").val($("#OfficeId").val());$("#mMblSalesTypeId").val($("#MblSalesTypeId").val());$("#mPreCarriageVesselNameId").val($("#PreCarriageVesselNameId").val());$("#mSvcTermFromId").val($("#SvcTermFromId").val());$("#mSvcTermToId").val($("#SvcTermToId").val());$("#mShipModeId").val($("#ShipModeId").val());$("#mFreightTermId").val($("#FreightTermId").val());$("#mBlTypeId").val($("#BlTypeId").val());$("#mMblCarrierId").val($("#MblCarrierId").val());$("#mBlAcctCarrierId").val($("#BlAcctCarrierId").val());$("#mShippingAgentId").val($("#ShippingAgentId").val());$("#mMblOverseaAgentId").val($("#MblOverseaAgentId").val());$("#mMblNotifyId").val($("#MblNotifyId").val());$("#mMblReferralById").val($("#MblReferralById").val());$("#mEmptyPickupId").val($("#EmptyPickupId").val());$("#mDeliveryToId").val($("#DeliveryToId").val());$("#mCoLoaderId").val($("#CoLoaderId").val());$("#mForwardingAgentId").val($("#ForwardingAgentId").val());$("#mCareOfId").val($("#CareOfId").val());$("#mPorId").val($("#PorId").val());$("#mPolId").val($("#PolId").val());$("#mPodId").val($("#PodId").val());$("#mDelId").val($("#DelId").val());$("#mFdestId").val($("#FdestId").val());$("#mTransPort1Id").val($("#TransPort1Id").val());$("#hCargoTypeId").val($("#CargoTypeId").val());$("#hHSvcTermFromId").val($("#HSvcTermFromId").val());$("#hHSvcTermToId").val($("#HSvcTermToId").val());$("#hHShipModeId").val($("#HShipModeId").val());$("#hFreightTermForBuyerId").val($("#FreightTermForBuyerId").val());$("#hFreightTermForSalerId").val($("#FreightTermForSalerId").val());$("#hHblCustomerId").val($("#HblCustomerId").val());$("#hHblShipperId").val($("#HblShipperId").val());$("#hHblBillToId").val($("#HblBillToId").val());$("#hHblConsigneeId").val($("#HblConsigneeId").val());$("#hHblNotifyId").val($("#HblNotifyId").val());$("#hCustomsBrokerId").val($("#CustomsBrokerId").val());$("#hTruckerId").val($("#TruckerId").val());$("#hAgentId").val($("#AgentId").val());$("#hHblForwardingAgentId").val($("#HblForwardingAgentId").val());$("#hReceivingAgentId").val($("#ReceivingAgentId").val());$("#hFbaFcId").val($("#FbaFcId").val());$("#hHEmptyPickupId").val($("#HEmptyPickupId").val());$("#hHDeliveryToId").val($("#HDeliveryToId").val());$("#hHMblReferralById").val($("#HMblReferralById").val());$("#hHPorId").val($("#HPorId").val());$("#hHPodId").val($("#HPodId").val());$("#hHDelId").val($("#HDelId").val());$("#hHFdestId").val($("#HFdestId").val());$("#mMblCarrierContent").val($("#MblCarrierContent").val());$("#mBlAcctCarrierContent").val($("#BlAcctCarrierContent").val());$("#mShippingAgentContent").val($("#ShippingAgentContent").val());$("#mMblOverseaAgentContent").val($("#MblOverseaAgentContent").val());$("#mMblNotifyContent").val($("#MblNotifyContent").val());$("#mForwardingAgentContent").val($("#ForwardingAgentContent").val());$("#mCoLoaderContent").val($("#CoLoaderContent").val());$("#mCareOfContent").val($("#CareOfContent").val());$("#mEmptyPickupContent").val($("#EmptyPickupContent").val());$("#mDeliveryToContent").val($("#DeliveryToContent").val());$("#mMblReferralByContent").val($("#MblReferralByContent").val());$("#mCancelById").val($("#CancelById").val());$("#mCancelReason").val($("#CancelReason").val());$("#mOblTypeId").val($("#OblTypeId").val());$("#editForm").submit()});$("#OceanExportMbl_MblNo").change(function(){$("#title0").text($(this).val())});$("#OceanExportMbl_PolEtd").change(function(){$("#title2").text("("+$(this).val()+")")});$("#OceanExportMbl_PodEta").change(function(){$("#title4").text("("+$(this).val()+")")});$("#OceanExportMbl_VesselName").change(function(){$("#title5").text('<i class="fa fa-anchor"><\/i>'+$(this).val())});$("#createForm").on("abp-ajax-success",function(n,t){event.preventDefault();location.href="EditModal?ShowMsg=true&Id="+t.responseText.id});$("#editForm").on("abp-ajax-success",function(){event.preventDefault();var n=abp.localization.getResource("Freight");abp.message.success(n("Message:SuccessEdit"))});initHideBtn();$("#checkHideBtn").click(function(){initHideBtn()});initReasonStatus();$("#OceanExportMbl_IsCanceled").change(function(){initReasonStatus()})});
